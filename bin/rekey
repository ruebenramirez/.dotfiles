#!/usr/bin/env bash

set -e

echo "STARTING keyboard setup"

killall xbindkeys
xbindkeys -f ~/.xbindkeysrc

# swap escape and capslock if not in a VM (if in a VM, we have likely already swapped these keys)
if [[ $(grep hypervisor /proc/cpuinfo | wc -l) -lt 1 ]]; then
    echo "not in a VM"
    setxkbmap -option caps:swapescape
    $(grep xset ~/.xinitrc)
fi

# faster key repeat
xset r rate 220 60



echo "FINISHED keyboard setup"
